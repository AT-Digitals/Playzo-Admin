"use strict";(self.webpackChunkplayzo_admin_panel=self.webpackChunkplayzo_admin_panel||[]).push([[996],{88996:(e,n,t)=>{t.r(n),t.d(n,{default:()=>v});var o=t(9019),i=t(61113),a=t(63984),l=t(31095),s=t(41806),r=t(47313),c=t(70816),d=t.n(c),g=t(10658),m=t.n(g),h=t(66212),x=t(97402),u=t(27164),p=t(77552),k=t(46417);const y=e=>{let{color:n,title:t,count:l,percentage:s,isLoss:r,extra:c}=e;return(0,k.jsx)(x.Z,{contentSX:{p:2.25},children:(0,k.jsxs)(a.Z,{spacing:3,children:[(0,k.jsx)(i.Z,{variant:"h6",color:"textSecondary",children:t}),(0,k.jsxs)(o.ZP,{container:!0,alignItems:"center",children:[(0,k.jsx)(o.ZP,{item:!0,children:(0,k.jsx)(i.Z,{variant:"h4",color:"inherit",children:l})}),s&&(0,k.jsx)(o.ZP,{item:!0,children:(0,k.jsx)(h.Z,{variant:"combined",color:n,icon:(0,k.jsxs)(k.Fragment,{children:[!r&&(0,k.jsx)(u.Z,{style:{fontSize:"0.75rem",color:"inherit"}}),r&&(0,k.jsx)(p.Z,{style:{fontSize:"0.75rem",color:"inherit"}})]}),label:"".concat(s,"%"),sx:{ml:1.25,pl:1},size:"small"})})]})]})})};y.defaultProps={color:"primary"};const j=y;var B=t(52178),f=t(92369),Z=t(58446);const b=(0,t(17592).ZP)(Z.Z)((e=>{let{theme:n}=e;return{".apexcharts-canvas":{margin:"0 auto"},".apexcharts-legend":{top:"100px !important"},".apexcharts-legend-series":{fontSize:"40px",marginTop:"50px"},".apexcharts-legend-marker":{height:"20px !important",width:"20px !important"},".apexcharts-legend-text":{fontSize:"20px !important"}}})),P=e=>{let{selectData:n,palette1:t}=e;const{labels:o,series:i}=n,a={chart:{type:"pie"},theme:{mode:"light",palette:t,monochrome:{enabled:!1,color:"#255aee",shadeTo:"light",shadeIntensity:.65}},labels:o,dataLabels:{enabled:!0,textAnchor:"middle",offsetX:50,offsetY:40,style:{fontSize:"15px",paddingX:"40px"},formatter:function(e,n){let{seriesIndex:t,dataPointIndex:o,w:i}=n;i.config.labels[t];const a=i.config.series[t];return"".concat(a)}}};return(0,k.jsx)(s.Z,{paddingX:3,paddingTop:5,paddingBottom:5,children:(0,k.jsx)(s.Z,{width:"100%",maxWidth:"1200px",margin:"auto",children:(0,k.jsx)(b,{options:a,series:i,type:"pie",width:"700"})})})};var C=t(2007);const S={online:0,manual:0,totalBooking:0},v=()=>{const[e,n]=(0,r.useState)([]),[t,c]=(0,r.useState)([]),[g,h]=(0,r.useState)("All Services"),[u,p]=(0,r.useState)(),[y,Z]=(0,r.useState)(""),[b,v]=(0,r.useState)(""),[w,D]=(0,r.useState)(0),[A,I]=(0,r.useState)([]),[O,T]=(0,r.useState)(!0),[M,z]=(0,r.useState)(!1),[U,Y]=(0,r.useState)(""),[E,G]=(0,r.useState)(!1),[N,R]=(0,r.useState)("All Payments"),[L,X]=(0,r.useState)(S),_=e=>{R(e)},W=e=>{h(e)},$=(0,r.useCallback)((async()=>{try{await f.Z.getAll({}).then((e=>{c(e)}))}catch{console.log("data fetching failed")}}),[]),q=e=>{const n=e.filter((e=>"manual"===e.userBookingType)),t=e.filter((e=>"online"===e.userBookingType)),o=n.length,i=t.length;return{manual:o,online:i,totalBooking:o+i}},F=(e,n)=>{const t=e.filter((e=>e.type===n)),o=t.filter((e=>"manual"===e.userBookingType)),i=t.filter((e=>"online"===e.userBookingType)),a=o.length,l=i.length;return{manual:a,online:l,totalBooking:a+l}},H=F(e,"turf"),J=F(e,"boardGame"),K=F(e,"playstation"),Q=F(e,"cricketNet"),V=F(e,"bowlingMachine"),ee=F(e,"badminton"),ne=q(e),te=(e=>{let n=0;return e.forEach((e=>{n+=e.bookingAmount.online})),n})(e),oe=(e=>{let n=0;return e.forEach((e=>{n+=e.bookingAmount.cash})),n})(e),ie=(e=>{let n=50;return e.forEach((e=>{n+=e.bookingAmount.upi})),n})(e),ae=(e=>{let n=0;return e.forEach((e=>{n+=e.bookingAmount.refund})),n})(e),le=te+oe+ie+ae,se={"All Services":{onlineBooking:ne.online,cashBooking:ne.manual,totalBooking:ne.totalBooking},turf:{onlineBooking:H.online,cashBooking:H.manual,totalBooking:H.totalBooking},boardGame:{onlineBooking:J.online,cashBooking:J.manual,totalBooking:J.totalBooking},playstation:{onlineBooking:K.online,cashBooking:K.manual,totalBooking:K.totalBooking},cricketNet:{onlineBooking:Q.online,cashBooking:Q.manual,totalBooking:Q.totalBooking},bowlingMachine:{onlineBooking:V.online,cashBooking:V.manual,totalBooking:V.totalBooking},badminton:{onlineBooking:ee.online,cashBooking:ee.manual,totalBooking:ee.totalBooking}},re={"All Payments":{BookingCount:le,onlinePayment:te,cashPayment:oe,UpiPayment:ie,refundPayment:ae},Online:{BookingCount:te,onlinePayment:te},Cash:{BookingCount:oe,cashPayment:oe},UPI:{BookingCount:ie,UpiPayment:ie},Refund:{BookingCount:ae,refundPayment:ae}},ce=(e=>{if(null===e){const e=Object.keys(re),n=Object.values(re).map((e=>e.BookingCount));return{labels:e,series:n}}{const n=re[e];return{labels:"All Payments"===N?["Total Amount","Online","Cash","UPI","Refund"]:["".concat(N)],series:"All Payments"===N?[n.BookingCount,n.onlinePayment,n.cashPayment,n.UpiPayment,n.refundPayment]:[n.BookingCount]}}})(N),de=(e=>{if(null===e){const e=Object.keys(se),n=Object.values(se).map((e=>e.onlineBooking+e.cashBooking+totalBooking));return{labels:e,series:n}}{const n=se[e];return{labels:["Online Bookings","Manual Bookings","Total Bookings"],series:[n.onlineBooking,n.cashBooking,n.totalBooking]}}})(g),ge=q(e),me={"Online Bookings":{Booking:ge.online},"Manual Bookings":{Booking:ge.manual},"Total Bookings":{Booking:ge.totalBooking}},he=(e=>{if(e&&e.startDate&&e.endDate){return{labels:["Online Bookings","Manual Bookings","Total Bookings"],series:[L.online,L.manual,L.totalBooking]}}{const e=Object.keys(me),n=Object.values(me).map((e=>e.Booking));return{labels:e,series:n}}})(u),xe=(0,r.useCallback)((async e=>{if(e.preventDefault(),y)if(b){if(""!==y||""!==b){p({startDate:y,endDate:b})}z(!0),T(!1)}else G(!0);else Y(!0)}),[b,y]),ue=(0,r.useCallback)((async()=>{try{u?await B.Z.filterBook(u).then((e=>{if(D(e.length),I(e),A){const n=q(e);(e=>{X({...L,...e})})({online:n.online,manual:n.manual,totalBooking:n.totalBooking})}})):await B.Z.getAll({}).then((e=>{D(e.length),n(e)}))}catch{console.log("Error fetching data")}}),[u]);return(0,r.useEffect)((()=>{$(),ue()}),[ue]),(0,k.jsxs)(o.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,k.jsx)(o.ZP,{item:!0,xs:12,sx:{mb:-2.25},children:(0,k.jsx)(i.Z,{variant:"h5",children:"Dashboard"})}),(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,k.jsx)(j,{title:"Total Bookings",count:ne.totalBooking.toString()})}),(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,k.jsx)(j,{title:"Manual Bookings",count:ne.manual.toString()})}),(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,k.jsx)(j,{title:"Online Bookings",count:ne.online.toString(),isLoss:!0,color:"warning"})}),(0,k.jsx)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,k.jsx)(j,{title:"Enquiries",count:t.length.toString(),isLoss:!0,color:"warning",extra:"$20,395"})}),(0,k.jsxs)(o.ZP,{item:!0,xs:12,children:[(0,k.jsxs)(o.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,k.jsx)(o.ZP,{item:!0,marginBottom:3,children:(0,k.jsx)(i.Z,{variant:"h3",children:"Booking Chart"})}),(0,k.jsx)(o.ZP,{item:!0,marginBottom:3,children:(0,k.jsxs)(a.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,k.jsx)(C.Z,{error:U,date:y,setDate:e=>{let n=e.$d;const t=d()(n).format("YYYY-MM-DD");Z(t),Y(!1),b&&new Date(b)<new Date(t)&&v("")},label:"Start Date",disableprop:M}),(0,k.jsx)(C.Z,{date:b,setDate:e=>{let n=e.$d;const t=d()(n).format("YYYY-MM-DD");v(t),G(!1)},label:"End Date",disableprop:M,shouldDisableDate:e=>!!y&&m()(e).isBefore(m()(y),"day"),error:E}),O?(0,k.jsx)(l.Z,{variant:"outlined",onClick:xe,sx:{padding:"7px 15px",width:"150px",fontWeight:600,fontSize:"15px",marginTop:"35px !important"},children:"Apply"}):(0,k.jsx)(l.Z,{variant:"outlined",onClick:async()=>{p(e),T(!0),Z(""),v(""),z(!1),await B.Z.getAll({}).then((e=>{D(e.length),n(e)}))},sx:{padding:"7px 15px",width:"150px",fontWeight:600,fontSize:"15px",marginTop:"35px !important"},children:"Clear"})]})})]}),(0,k.jsx)(x.Z,{content:!1,sx:{mt:1.5},children:(0,k.jsx)(s.Z,{sx:{pt:1,pr:2},children:(0,k.jsx)(P,{selectData:he,palette1:"palette1"})})})]}),(0,k.jsxs)(o.ZP,{item:!0,xs:12,children:[(0,k.jsxs)(o.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,k.jsx)(o.ZP,{item:!0,children:(0,k.jsx)(i.Z,{variant:"h3",children:"Booking Service Chart"})}),(0,k.jsx)(o.ZP,{item:!0,children:(0,k.jsxs)(a.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,k.jsx)(l.Z,{onClick:()=>W("All Services"),color:"All Services"===g?"primary":"secondary",variant:"All Services"===g?"outlined":"text",children:"All Services"}),(0,k.jsx)(l.Z,{onClick:()=>W("turf"),color:"turf"===g?"primary":"secondary",variant:"turf"===g?"outlined":"text",children:"Turf"}),(0,k.jsx)(l.Z,{onClick:()=>W("boardGame"),color:"boardGame"===g?"primary":"secondary",variant:"boardGame"===g?"outlined":"text",children:"Board Game"}),(0,k.jsx)(l.Z,{onClick:()=>W("playstation"),color:"playstation"===g?"primary":"secondary",variant:"playstation"===g?"outlined":"text",children:"Play Station"}),(0,k.jsx)(l.Z,{onClick:()=>W("cricketNet"),color:"cricketNet"===g?"primary":"secondary",variant:"cricketNet"===g?"outlined":"text",children:"Cricket Net"}),(0,k.jsx)(l.Z,{onClick:()=>W("bowlingMachine"),color:"bowlingMachine"===g?"primary":"secondary",variant:"bowlingMachine"===g?"outlined":"text",children:"Bowling Machine"}),(0,k.jsx)(l.Z,{onClick:()=>W("badminton"),color:"badminton"===g?"primary":"secondary",variant:"badminton"===g?"outlined":"text",children:"Badminton"})]})})]}),(0,k.jsx)(x.Z,{content:!1,sx:{mt:1.5},children:(0,k.jsx)(s.Z,{sx:{pt:1,pr:2},children:(0,k.jsx)(P,{selectData:de,palette1:"palette2"})})})]}),(0,k.jsxs)(o.ZP,{item:!0,xs:12,children:[(0,k.jsxs)(o.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,k.jsx)(o.ZP,{item:!0,children:(0,k.jsx)(i.Z,{variant:"h3",children:"Payment Chart"})}),(0,k.jsx)(o.ZP,{item:!0,children:(0,k.jsxs)(a.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,k.jsx)(l.Z,{onClick:()=>_("All Payments"),color:"All Payments"===N?"primary":"secondary",variant:"All Payments"===N?"outlined":"text",children:"All Payments"}),(0,k.jsx)(l.Z,{onClick:()=>_("Online"),color:"Online"===N?"primary":"secondary",variant:"Online"===N?"outlined":"text",children:"Online"}),(0,k.jsx)(l.Z,{onClick:()=>_("Cash"),color:"Cash"===N?"primary":"secondary",variant:"Cash"===N?"outlined":"text",children:"Cash"}),(0,k.jsx)(l.Z,{onClick:()=>_("UPI"),color:"UPI"===N?"primary":"secondary",variant:"UPI"===N?"outlined":"text",children:"UPI"}),(0,k.jsx)(l.Z,{onClick:()=>_("Refund"),color:"Refund"===N?"primary":"secondary",variant:"Refund"===N?"outlined":"text",children:"Refund"})]})})]}),(0,k.jsx)(x.Z,{content:!1,sx:{mt:1.5},children:(0,k.jsx)(s.Z,{sx:{pt:1,pr:2},children:"Online"===N?(0,k.jsx)(P,{selectData:ce,palette1:"palette5"}):"Cash"===N?(0,k.jsx)(P,{selectData:ce,palette1:"palette7"}):"UPI"===N?(0,k.jsx)(P,{selectData:ce,palette1:"palette6"}):(0,k.jsx)(P,{selectData:ce,palette1:"palette8",selectPaymentType:N})})})]})]})}}}]);